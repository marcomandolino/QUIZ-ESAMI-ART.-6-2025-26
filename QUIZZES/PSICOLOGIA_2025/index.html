// Funzione per mescolare un array (Fisher-Yates)
function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

// Funzione per selezionare casualmente le domande e mescolare le opzioni
function getRandomQuestions(questions, count) {
    const shuffled = [...questions].sort(() => 0.5 - Math.random());
    const selected = shuffled.slice(0, count);
    
    // Per ogni domanda selezionata, mescola le opzioni e aggiorna l'indice corretto
    return selected.map(question => {
        // Salva la risposta corretta originale
        const correctAnswer = question.options[question.correct];
        
        // Mescola le opzioni
        const shuffledOptions = shuffleArray(question.options);
        
        // Trova il nuovo indice della risposta corretta
        const newCorrectIndex = shuffledOptions.indexOf(correctAnswer);
        
        // Restituisce una nuova domanda con le opzioni mescolate e il nuovo indice corretto
        return {
            ...question,
            options: shuffledOptions,
            correct: newCorrectIndex
        };
    });
}
