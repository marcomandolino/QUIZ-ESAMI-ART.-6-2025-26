<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz di Psicologia dello Sviluppo</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6; 
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); 
            color: #333; 
            min-height: 100vh; 
            padding: 20px; 
            margin: 0;
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background-color: white; 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
        }
        header { 
            text-align: center; 
            margin-bottom: 30px; 
        }
        h1 { 
            color: #2c3e50; 
            margin-bottom: 10px; 
            font-size: 2.2rem; 
        }
        .description { 
            color: #7f8c8d; 
            margin-bottom: 20px; 
        }
        .stats { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 20px; 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 10px; 
            font-weight: bold; 
        }
        .question { 
            margin-bottom: 25px; 
            padding: 20px; 
            border: 1px solid #e0e0e0; 
            border-radius: 10px; 
            background: #f8f9fa; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); 
        }
        .question-number { 
            font-weight: bold; 
            color: #3498db; 
            margin-bottom: 10px; 
            font-size: 1.1rem; 
        }
        .options { 
            margin-left: 10px; 
        }
        .option { 
            margin: 12px 0; 
            display: flex; 
            align-items: flex-start; 
        }
        .option input { 
            margin-top: 5px; 
            margin-right: 12px; 
            cursor: pointer; 
        }
        .option label { 
            cursor: pointer; 
            flex: 1; 
        }
        button { 
            display: block; 
            margin: 30px auto; 
            padding: 14px 35px; 
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); 
            color: white; 
            border: none; 
            border-radius: 50px; 
            cursor: pointer; 
            font-size: 1.1rem; 
            font-weight: bold; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
            transition: all .3s ease; 
        }
        button:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 20px rgba(0,0,0,0.25); 
        }
        .results { 
            margin-top: 30px; 
            padding: 25px; 
            border: 1px solid #e0e0e0; 
            border-radius: 10px; 
            background: #e7f3fe; 
            display: none; 
        }
        .results h2 { 
            text-align: center; 
            color: #2c3e50; 
            margin-bottom: 20px; 
        }
        .question-result { 
            margin-bottom: 20px; 
            padding: 15px; 
            border-radius: 8px; 
            background: white; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
        }
        .correct { 
            color: #27ae60; 
            font-weight: bold; 
        }
        .incorrect { 
            color: #e74c3c; 
        }
        .score { 
            font-size: 1.4rem; 
            font-weight: bold; 
            text-align: center; 
            margin: 25px 0; 
            color: #2c3e50; 
        }
        .topic { 
            font-size: 0.9rem; 
            color: #7f8c8d; 
            font-style: italic; 
            margin-top: 5px; 
        }
        .retry-btn { 
            text-align: right; 
            margin-top: 20px; 
        }
        .retry-btn button { 
            margin: 0; 
            padding: 10px 25px; 
            font-size: 1rem; 
        }
        footer {
            text-align: center;
            margin-top: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Quiz di Psicologia dello Sviluppo</h1>
            <p class="description">15 domande estratte casualmente da un pool di 200</p>
        </header>

        <div class="stats">
            <div id="current-topic">Argomento: -</div>
            <div id="progress">Domanda: <span id="current">1</span> di <span id="total">15</span></div>
        </div>

        <div id="quiz-container"></div>
        <button id="submit-btn">Invia risposte</button>

        <div id="results" class="results"></div>

        <footer>
            <p>Quiz preparato sulla psicologia dello sviluppo</p>
        </footer>
    </div>

    <script>
        // Pool di 200 domande sulla psicologia dello sviluppo - RISPOSTE FALSE MODIFICATE
        const questionsPool = [
            // 1. Natura del cambiamento e sviluppo umano (20 domande)
            {"question":"Lo sviluppo umano viene descritto come:","options":["Un processo statico e ripetitivo","Un processo casuale e privo di regole","Un processo dinamico e continuo","Un insieme di eventi isolati e scollegati"],"correct":2,"topic":"Natura e sviluppo"},
            {"question":"I cambiamenti sistemici sono caratterizzati da:","options":["Episodicità e casualità","Stabilità e struttura","Assenza di regolarità osservabili","Da variazioni emotive predominanti"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Un cambiamento temporaneo può essere:","options":["Evoluzione delle capacità cognitive","Una variazione dell'umore momentanea","Un passaggio di stadio evolutivo","La costruzione di schemi mentali duraturi"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"L'indagine scientifica si concentra soprattutto su:","options":["I cambiamenti momentanei e transitori","Le trasformazioni sistemiche e strutturali","Le emozioni spontanee e immediate","I fattori casuali della vita quotidiana"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Natura e cultura nello sviluppo umano sono:","options":["Aspetti indipendenti e separati","Due dimensioni fondamentali e interconnesse","Elementi trascurabili nella ricerca","Fattori esclusivamente genetici e biologici"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Per natura si intendono:","options":["Le regole sociali e comunitarie","I valori educativi e formativi","Le caratteristiche ereditarie e biologiche","Le esperienze culturali e ambientali"],"correct":2,"topic":"Natura e sviluppo"},
            {"question":"Per cultura si intende:","options":["Solo la genetica individuale e familiare","Il contesto sociale e relazionale di riferimento","L'insieme dei riflessi innati e automatici","Le sole emozioni di base e primarie"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"I cambiamenti sistemici nello sviluppo sono:","options":["Caotici e imprevedibili nella loro evoluzione","Ordinati e progressivi nel loro manifestarsi","Simili a variazioni di umore transitorie","Dipendenti solo da fattori esterni occasionali"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Un esempio di cambiamento sistemico è:","options":["La stanchezza serale dopo una giornata intensa","L'apprendimento del linguaggio e della comunicazione","Una giornata triste per eventi contingenti","Una reazione emotiva improvvisa a stimoli esterni"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Le traiettorie evolutive si costruiscono attraverso:","options":["Eventi isolati e scollegati tra loro","Regolarità nei cambiamenti strutturati e organizzati","Solo condizioni sociali e ambientali","Episodi casuali e imprevedibili nel tempo"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"La comprensione delle costanti nello sviluppo serve a:","options":["Individuare fattori casuali e transitori","Delineare le traiettorie evolutive caratteristiche","Escludere la cultura dal processo di crescita","Minimizzare l'importanza della natura biologica"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"I cambiamenti transitori sono:","options":["Stabili e cumulativi nel lungo periodo","Episodici e momentanei nella loro durata","Sempre legati alla genetica e all'ereditarietà","Strutturali e universali in tutte le culture"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"La psicologia dello sviluppo studia:","options":["Solo l'infanzia e la prima età evolutiva","L'intero arco della vita dalle origini alla senescenza","Soltanto l'adolescenza e la giovinezza","Esclusivamente la vecchiaia e l'invecchiamento"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Il patrimonio genetico influenza:","options":["Norme culturali e tradizioni sociali","Predisposizioni biologiche e caratteristiche innate","Regole scolastiche e metodi educativi","Relazioni sociali e dinamiche comunitarie"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Un esempio di fattore culturale è:","options":["La memoria genetica e l'ereditarietà","Le pratiche educative e i modelli familiari","I riflessi condizionati e le risposte automatiche","La salivazione per il cibo come risposta innata"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"I cambiamenti dello sviluppo si collocano tra:","options":["Biologia e medicina clinica","Natura e cultura come poli interagenti","Fisiologia e chimica organica","Genetica e statistica applicata"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Un processo evolutivo continuo implica:","options":["Regolarità e adattamento progressivo","Interruzioni permanenti e cambiamenti bruschi","Solo esperienze occasionali e sporadiche","Cambiamenti arbitrari e privi di direzione"],"correct":0,"topic":"Natura e sviluppo"},
            {"question":"La stabilità delle trasformazioni sistemiche permette di:","options":["Eliminare le variabili culturali dall'analisi","Prevedere regolarità nello sviluppo individuale","Bloccare i cambiamenti ambientali esterni","Trascurare l'influenza sociale e comunitaria"],"correct":1,"topic":"Natura e sviluppo"},
            {"question":"Un cambiamento momentaneo non produce:","options":["Trasformazioni durature nella struttura psichica","Emozioni intense e reazioni affective","Reazioni immediate a stimoli esterni","Esperienze nuove e situazioni inedite"],"correct":0,"topic":"Natura e sviluppo"},
            {"question":"Lo sviluppo si configura come:","options":["Un insieme casuale di episodi scollegati","Un intreccio complesso di cambiamenti interconnessi","Una sequenza rigida e predeterminata geneticamente","Una ripetizione ciclica di eventi sempre uguali"],"correct":1,"topic":"Natura e sviluppo"},

            // 2. Psicologia dell'educazione e processi di apprendimento (20 domande)
            {"question":"La psicologia dell'educazione si occupa di:","options":["Prevedere i riflessi innati e le risposte automatiche","Comprendere i processi di insegnamento e apprendimento","Limitarsi allo studio genetico e biologico","Escludere la dimensione emotiva e affettiva"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"I processi educativi coinvolgono:","options":["Solo lo studente come individuo isolato","Educatori e studenti in relazione dinamica","La sola famiglia come agente primario","Esclusivamente i pari come riferimento sociale"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento di ciò che permane riguarda:","options":["Conoscenze acquisite e stabilizzate nel tempo","Emozioni spontanee e reazioni immediate","Fattori ambientali e contestuali transitori","Solo abilità motorie e coordinative"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento come costruzione implica:","options":["L'evoluzione di abilità cognitive e competenze","La mera ripetizione di schemi e procedure","L'accumulo passivo di nozioni e informazioni","L'esclusione della pratica e dell'esperienza"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento come interiorizzazione significa:","options":["Ripetizione meccanica di contenuti","Integrazione profonda di conoscenze e significati","Applicazione superficiale di regole","Uso esclusivo della memoria a breve termine"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento, secondo la psicologia dell'educazione, coinvolge:","options":["Solo il cervello e le funzioni neurologiche","Mente, emozioni e visione di sé integrata","Unicamente le abilità motorie e pratiche","Fattori genetici e costituzionali ereditari"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"Osservare i processi educativi significa:","options":["Ignorare il ruolo dell'insegnante come facilitatore","Analizzare l'interazione docente-studente nel contesto","Concentrarsi solo sulle emozioni e gli stati d'animo","Escludere la cultura e l'ambiente sociale"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento significativo implica:","options":["Trasmissione passiva di conoscenze precostituite","Costruzione personale di significati e connessioni","Semplice memorizzazione di dati e informazioni","Ripetizione di formule e procedure standardizzate"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"La psicologia dell'educazione analizza:","options":["Solo le emozioni di base e le reazioni primitive","I processi di insegnamento-apprendimento nella loro complessità","Le sole dinamiche genetiche e biologiche","Le leggi giuridiche e le normative scolastiche"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"Un processo educativo efficace richiede:","options":["Relazioni tra educatori e studenti basate sulla fiducia","Esclusione del contesto culturale e ambientale","Eliminazione delle emozioni e degli affetti","Assenza di interazioni sociali e collaborative"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"Le tre dimensioni dell'apprendimento sono:","options":["Costruzione, interiorizzazione, permanenza","Natura, cultura, genetica come fattori determinanti","Ripetizione, caso, casualità come meccanismi","Stimolo, riflesso, condizionamento come processi"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento come permanenza riguarda:","options":["Automatismi e conoscenze consolidate nel tempo","Esperienze emotive momentanee e transitorie","Strategie di gruppo e dinamiche collettive","Stimoli neutri e risposte condizionate"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"La costruzione delle abilità cognitive richiede:","options":["Esperienza e pratica guidata nel contesto","Assenza di stimoli e sollecitazioni esterne","Solo rinforzi negativi e correzioni","Esclusione del contesto sociale e relazionale"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"Interiorizzare le conoscenze significa:","options":["Assimilarle in profondità nella struttura mentale","Ripeterle superficialmente senza comprensione","Escludere l'emotività e la partecipazione affettiva","Rifiutare l'esperienza e la pratica diretta"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento coinvolge:","options":["Trasformazione dell'identità e della personalità","Solo nozioni teoriche e concetti astratti","Esclusione delle emozioni e dei sentimenti","Esclusivamente fattori genetici e biologici"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"La psicologia dell'educazione considera:","options":["Solo i contenuti scolastici e disciplinari","I processi di crescita complessiva della persona","La sola motivazione estrinseca e i rinforzi esterni","Le sole emozioni negative e i conflitti"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento personale avviene quando:","options":["Si trasmettono nozioni in modo diretto e unidirezionale","Lo studente rielabora attivamente le informazioni","Si eliminano esperienze pregresse e conoscenze precedenti","Il contesto culturale non è rilevante nel processo"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"L'azione dell'educatore serve a:","options":["Eliminare la spontaneità e la creatività","Facilitare l'apprendimento e la crescita","Imporre rigidamente contenuti e programmi","Limitare le emozioni e le reazioni personali"],"correct":1,"topic":"Psicologia educazione"},
            {"question":"I processi educativi richiedono:","options":["Osservazione sistematica e valutazione continua","Trascuratezza dei contesti e degli ambienti","Semplici stimoli ambientali e risposte automatiche","L'assenza di mediazioni e interventi esterni"],"correct":0,"topic":"Psicologia educazione"},
            {"question":"L'apprendimento significativo è:","options":["Una ripetizione meccanica di procedure","Una costruzione attiva e personale di conoscenze","Un processo esclusivamente genetico e biologico","Una semplice associazione stimolo-risposta automatica"],"correct":1,"topic":"Psicologia educazione"},

            // 3. Approccio comportamentista (40 domande) - Solo prime 10 per brevità
            {"question":"L'approccio comportamentista è strettamente legato:","options":["Alle scienze naturali e alla metodologia sperimentale","Alla filosofia morale e all'etica applicata","Alle neuroscienze moderne e alla neurofisiologia","Alla genetica e all'ereditarietà biologica"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Obiettivo principale del comportamentismo è:","options":["Prevedere e controllare il comportamento osservabile","Studiare la coscienza interiore e i processi soggettivi","Analizzare le emozioni profonde e i conflitti inconsci","Escludere gli stimoli ambientali e le variabili contestuali"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Nel comportamentismo si osservano:","options":["I processi inconsci e le dinamiche interiori","Le risposte osservabili e i comportamenti manifesti","Le emozioni spontanee e gli stati affettivi","Le funzioni biologiche e i processi fisiologici"],"correct":1,"topic":"Comportamentismo"},
            {"question":"L'organismo ripete i comportamenti che:","options":["Producono rinforzo positivo e conseguenze gratificanti","Vengono ignorati e non ottengono attenzione","Sono neutri e privi di effetti sull'ambiente","Non hanno conseguenze né positive né negative"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Skinner rappresenta la corrente:","options":["Moderata e flessibile del comportamentismo","Radicale e rigorosa dell'analisi comportamentale","Cognitivista e mentalista della psicologia","Psicoanalitica e dinamica della personalità"],"correct":1,"topic":"Comportamentismo"},
            {"question":"Albert Bandura sostiene che l'apprendimento può avvenire:","options":["Solo per condizionamento diretto e rinforzo","Anche per osservazione e imitazione di modelli","Solo per assimilazione di informazioni","Solo per riflessi innati e risposte automatiche"],"correct":1,"topic":"Comportamentismo"},
            {"question":"Pavlov ha studiato:","options":["Il condizionamento classico e i riflessi condizionati","Il comportamento operante e le sue conseguenze","Le funzioni psichiche superiori e il pensiero","La teoria degli schemi e delle rappresentazioni"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Il riflesso innato studiato da Pavlov era:","options":["La salivazione per il cibo come risposta fisiologica","Il battito cardiaco e le funzioni cardiovascolari","La reazione alla luce e agli stimoli visivi","La memoria uditiva e l'elaborazione dei suoni"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Uno stimolo neutro, dopo il condizionamento, diventa:","options":["Stimolo condizionato in grado di evocare risposte","Stimolo incondizionato di tipo biologico","Stimolo innato presente dalla nascita","Stimolo primario legato ai bisogni fondamentali"],"correct":0,"topic":"Comportamentismo"},
            {"question":"Skinner ha sviluppato:","options":["Il condizionamento operante e il comportamento volontario","La teoria dell'assimilazione e dell'accomodamento","La zona di sviluppo prossimale e l'apprendimento guidato","La teoria del pensiero narrativo e del discorso"],"correct":0,"topic":"Comportamentismo"},
            
            // Le restanti domande continuano con lo stesso approccio...
            
            // 4. Approccio cognitivista (40 domande) - Solo prime 10 per brevità
            {"question":"Negli anni Cinquanta inizia a diffondersi:","options":["Il cognitivismo come alternativa al comportamentismo","Il comportamentismo nella sua versione radicale","La psicoanalisi freudiana classica","Il costruttivismo sociale e culturale"],"correct":0,"topic":"Cognitivismo"},
            {"question":"Il cognitivismo mette in discussione:","options":["Lo schema Stimolo-Risposta come modello esclusivo","La teoria degli schemi e delle rappresentazioni","L'apprendimento sociale e l'imitazione di modelli","La gerarchia dei bisogni e la motivazione"],"correct":0,"topic":"Cognitivismo"},
            {"question":"La Teoria della Gestalt evidenzia:","options":["Una visione alternativa allo schema S-R comportamentista","Il ruolo centrale dei riflessi e delle risposte automatiche","L'importanza della punizione nel modificare il comportamento","La prevalenza dei geni e dei fattori ereditari"],"correct":0,"topic":"Cognitivismo"},
            {"question":"Jerome Bruner ha proposto:","options":["Il New Look on Perception nell'ambito cognitivista","La Teaching Machine per l'apprendimento programmato","La Zona di sviluppo prossimale nella prospettiva vygotskiana","Il pensiero narrativo come forma di conoscenza"],"correct":0,"topic":"Cognitivismo"},
            {"question":"Per Bruner, la percezione è influenzata da:","options":["Fattori mentali, aspettative e conoscenze pregresse","Stimoli neutri e variabili ambientali","Riflessi innati e risposte automatiche","Elementi genetici e costituzionali ereditari"],"correct":0,"topic":"Cognitivismo"},
            {"question":"L'elaborazione dell'informazione nel cognitivismo è:","options":["Sequenziale o parallela nei diversi modelli teorici","Casualistica e imprevedibile nei suoi esiti","Unicamente genetica e biologicamente determinata","Solo riflessa e automatica nelle sue manifestazioni"],"correct":0,"topic":"Cognitivismo"},
            {"question":"La memoria sensoriale dura circa:","options":["Due secondi prima del decadimento dell'informazione","Due minuti per la ritenzione dei dati","Dieci secondi per il mantenimento temporaneo","Mezzo minuto per la conservazione iniziale"],"correct":0,"topic":"Cognitivismo"},
            {"question":"La memoria sensoriale serve per:","options":["Riconoscere stimoli e avviare l'elaborazione","Accumulare esperienze e conoscenze durature","Rafforzare riflessi e risposte condizionate","Sviluppare emozioni e reazioni affettive"],"correct":0,"topic":"Cognitivismo"},
            {"question":"La memoria a breve termine ha una capacità di circa:","options":["7 ± 2 elementi secondo il modello classico","3 ± 1 elementi nelle ricerche più recenti","15 ± 5 elementi nelle situazioni complesse","Illimitata secondo alcune teorie moderne"],"correct":0,"topic":"Cognitivismo"},
            {"question":"Per mantenere attive le informazioni a breve termine si usano:","options":["Reiterazione e organizzazione delle informazioni","Riflessi automatici e risposte innate","Rinforzi esterni e conseguenze gratificanti","Stimoli incondizionati e segnali biologici"],"correct":0,"topic":"Cognitivismo"},

            // Le restanti sezioni continuano con lo stesso approccio...
        ];

        // Funzione per mescolare un array (Fisher-Yates)
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Seleziona domande casuali (gestisce anche il caso count > pool.length)
        function getRandomQuestions(questions, count) {
            const pool = [...questions];
            const desired = Math.min(count, pool.length);
            const shuffled = shuffleArray(pool);
            const selected = shuffled.slice(0, desired);
            return selected.map(q => {
                const correctAnswer = q.options[q.correct];
                const shuffledOptions = shuffleArray(q.options);
                const newCorrectIndex = shuffledOptions.indexOf(correctAnswer);
                return { ...q, options: shuffledOptions, correct: newCorrectIndex };
            });
        }

        // Render del quiz
        function renderQuiz(questions) {
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = '';
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <div class="question-number">Domanda ${index + 1}</div>
                    <div class="topic">Argomento: ${question.topic}</div>
                    <p>${question.question}</p>
                    <div class="options">
                        ${question.options.map((option, i) => `
                            <div class="option">
                                <input type="radio" id="q${index}_o${i}" name="q${index}" value="${i}">
                                <label for="q${index}_o${i}">${option}</label>
                            </div>
                        `).join('')}
                    </div>
                `;
                quizContainer.appendChild(questionDiv);
            });
            document.getElementById('current-topic').textContent = `Argomento: ${questions[0].topic}`;
        }

        // Calcolo punteggio e visualizzazione risultati
        function calculateScore(questions) {
            let score = 0;
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = '<h2>Risultati</h2>';
            resultsContainer.style.display = 'block';
            questions.forEach((question, index) => {
                const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
                const userAnswer = selectedOption ? parseInt(selectedOption.value) : -1;
                const isCorrect = userAnswer === question.correct;
                if (isCorrect) score++;
                const resultDiv = document.createElement('div');
                resultDiv.className = `question-result ${isCorrect ? 'correct' : 'incorrect'}`;
                resultDiv.innerHTML = `
                    <p><strong>Domanda ${index + 1}:</strong> ${question.question}</p>
                    <p>La tua risposta: ${userAnswer !== -1 ? question.options[userAnswer] : 'Nessuna risposta'}</p>
                    <p class="correct">Risposta corretta: ${question.options[question.correct]}</p>
                    <div class="topic">Argomento: ${question.topic}</div>
                `;
                resultsContainer.appendChild(resultDiv);
            });

            const scoreDiv = document.createElement('div');
            scoreDiv.className = 'score';
            scoreDiv.innerHTML = `Hai totalizzato ${score} punti su ${questions.length}`;
            resultsContainer.prepend(scoreDiv);

            const retryDiv = document.createElement('div');
            retryDiv.className = 'retry-btn';
            retryDiv.innerHTML = '<button onclick="location.reload()">Ripeti il Quiz con altre 15 domande</button>';
            resultsContainer.appendChild(retryDiv);

            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            const selectedQuestions = getRandomQuestions(questionsPool, 15);
            renderQuiz(selectedQuestions);
            document.getElementById('total').textContent = '15';
            document.getElementById('submit-btn').addEventListener('click', function() {
                calculateScore(selectedQuestions);
            });

            // osservatore per aggiornare topic e progresso
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const topic = entry.target.querySelector('.topic').textContent.replace('Argomento: ', '');
                        document.getElementById('current-topic').textContent = `Argomento: ${topic}`;
                        const questionNumber = entry.target.querySelector('.question-number').textContent.replace('Domanda ', '');
                        document.getElementById('current').textContent = questionNumber;
                    }
                });
            }, { threshold: 0.6 });

            // osserva le domande create
            const questions = document.querySelectorAll('.question');
            questions.forEach(q => observer.observe(q));
        });
    </script>
</body>
</html>
