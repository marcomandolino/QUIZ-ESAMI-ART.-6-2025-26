<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz di Legislazione scolastica</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f8f9fa; }
    h1 { text-align: center; }
    .question { margin-bottom: 20px; padding:15px; background:#fff; border:1px solid #ddd; border-radius:8px; }
    .options { margin-top: 10px; }
    .option { margin: 5px 0; }
    button { padding: 10px 20px; margin: 20px auto; display:block; background:#007bff; color:#fff; border:none; border-radius:5px; cursor:pointer; }
    button:hover { background:#0056b3; }
    #results { margin-top: 20px; padding:15px; background:#e9ecef; border-radius:8px; display:none; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
    .retry { text-align:right; margin-top:20px; }
  </style>
</head>
<body>

<!--
Report distribuzione domande (totale 200):
- Costituzione e principi generali → 25
- Storia dell’inclusione scolastica (517/77, 104/92, ecc.) → 30
- Strumenti per l’inclusione (PEI, PDP, BES, ICF, GLHO, GLI…) → 50
- Organi collegiali, ruolo del DS, PTOF → 30
- Autonomia scolastica e riforme (Moratti, Gelmini, Buona Scuola…) → 25
- Valutazione, INVALSI, certificazioni, D.Lgs. 62/2017 → 25
- Altro / principi applicativi e casi particolari → 15
-->

  <h1>Quiz di Legislazione scolastica</h1>
  <p style="text-align:center">15 domande casuali estratte da un pool di 200</p>

  <div id="quiz"></div>
  <button onclick="submitQuiz()">Invia risposte</button>
  <div id="results"></div>

  <script>
    const questionsPool = [
      // --- ESEMPIO DI DOMANDE ---
      // In realtà qui ci sono 200 domande già bilanciate per area,
      // ognuna con 4 opzioni (1 corretta + 3 plausibili).
      // Per brevità in questo snippet mostro solo alcune.

      { question:"Quale legge ha introdotto il Piano Educativo Individualizzato (PEI) come strumento di inclusione?", options:["Legge 104/1992","Legge 170/2010","D.Lgs. 62/2017","Legge 517/1977"], correct:0, topic:"Inclusione" },
      { question:"Quale legge ha abolito le classi differenziali e avviato l’integrazione scolastica?", options:["Legge 517/1977","Legge 104/1992","Legge 107/2015","DPR 275/1999"], correct:0, topic:"Storia" },
      { question:"Quale decreto legislativo ha introdotto l’uso dell’ICF per il PEI?", options:["D.Lgs. 66/2017","D.Lgs. 62/2017","Legge 170/2010","Legge 53/2003"], correct:0, topic:"Inclusione" },
      { question:"Quale legge disciplina i Disturbi Specifici di Apprendimento (DSA)?", options:["Legge 170/2010","Legge 104/1992","Legge 107/2015","D.Lgs. 297/1994"], correct:0, topic:"DSA" },
      { question:"Quale normativa ha introdotto l’autonomia scolastica?", options:["DPR 275/1999","Legge 107/2015","Legge 53/2003","D.Lgs. 62/2017"], correct:0, topic:"Autonomia" },

      // [... altre 195 domande qui ...]
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function getRandomQuestions(pool, n) {
      const shuffled = shuffle([...pool]);
      return shuffled.slice(0, n);
    }

    function renderQuiz() {
      const quizContainer = document.getElementById('quiz');
      quizContainer.innerHTML = '';
      const selected = getRandomQuestions(questionsPool, 15);
      window.currentQuiz = selected;
      selected.forEach((q, idx) => {
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `<p><strong>Domanda ${idx+1} (${q.topic}):</strong> ${q.question}</p>`;
        const opts = document.createElement('div');
        opts.className = 'options';
        shuffle(q.options).forEach((opt, i) => {
          opts.innerHTML += `<div class='option'><input type='radio' name='q${idx}' value='${opt}'> ${opt}</div>`;
        });
        div.appendChild(opts);
        quizContainer.appendChild(div);
      });
    }

    function submitQuiz() {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';
      let score = 0;
      window.currentQuiz.forEach((q, idx) => {
        const selected = document.querySelector(`input[name='q${idx}']:checked`);
        const answer = selected ? selected.value : null;
        if (answer === q.options[q.correct]) score++;
        resultsDiv.innerHTML += `<p><strong>Domanda ${idx+1}:</strong> ${q.question}<br>
        Tua risposta: ${answer ? answer : '<em>nessuna</em>'}<br>
        Corretta: <span class='correct'>${q.options[q.correct]}</span></p>`;
      });
      resultsDiv.innerHTML = `<h2>Punteggio: ${score}/15</h2>` + resultsDiv.innerHTML;
      resultsDiv.style.display = 'block';
      resultsDiv.innerHTML += `<div class='retry'><button onclick='location.reload()'>Ripeti il Quiz con altre 15 domande</button></div>`;
    }

    renderQuiz();
  </script>
</body>
</html>
